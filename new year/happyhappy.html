<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Pilih yang Benar üòé</title>

    <style>
      body {
        margin: 0;
        background: black;
        overflow: hidden;
        font-family: Arial, sans-serif;
        color: gold;
      }

      .screen {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      h1 {
        margin-bottom: 30px;
      }

      .btn {
        padding: 15px 35px;
        font-size: 22px;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        position: absolute;
      }

      .good {
        background: gold;
        box-shadow: 0 0 20px gold;
        bottom: 40%;
      }

      .bad {
        background: crimson;
        color: white;
        box-shadow: 0 0 20px red;
      }

      canvas {
        display: none;
      }

      .text {
        position: absolute;
        top: 38%;
        width: 100%;
        text-align: center;
        font-size: 60px;
        font-weight: bold;
        display: none;
        text-shadow: 0 0 30px gold, 0 0 60px orange;
        letter-spacing: 4px;
      }
    </style>
  </head>

  <body>
    <div class="screen" id="choiceScreen">
      <h1>PILIH YANG BENAR ü§î</h1>

      <button class="btn good" id="goodBtn">ROBI GANTENG üòé</button>
      <button class="btn bad" id="badBtn">ROBI JELEK üòù</button>
    </div>

    <div class="text" id="message"></div>
    <canvas id="canvas"></canvas>

    <script>
      const badBtn = document.getElementById('badBtn');
      const goodBtn = document.getElementById('goodBtn');
      const screen = document.getElementById('choiceScreen');
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      const text = document.getElementById('message');

      // ================= TOMBOL JELEK =================
      moveBadBtn();

      function moveBadBtn() {
        const x = Math.random() * (window.innerWidth - 150);
        const y = Math.random() * (window.innerHeight - 100);
        badBtn.style.left = x + 'px';
        badBtn.style.top = y + 'px';
      }

      badBtn.addEventListener('mouseenter', moveBadBtn);
      badBtn.addEventListener('click', moveBadBtn);

      // ================= KLIK ROBI GANTENG =================
      goodBtn.addEventListener('click', () => {
        screen.style.display = 'none';
        startNewYear();
      });

      // ================= TYPEWRITER =================
      const fullText = 'HAPPY NEW YEAR INAY CANTIK ‚ù§Ô∏è';
      let index = 0;

      function typeText() {
        text.style.display = 'block';
        if (index < fullText.length) {
          text.innerHTML += fullText.charAt(index);
          index++;
          setTimeout(typeText, 120);
        } else {
          // setelah teks selesai ‚Üí kembang api
          bigBoom();
          animate();
        }
      }

      // ================= CANVAS =================
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      function startNewYear() {
        canvas.style.display = 'block';
        text.innerHTML = '';
        index = 0;
        typeText();
      }

      // ================= FIREWORK =================
      class Firework {
        constructor(x, y, count = 150) {
          this.particles = [];
          for (let i = 0; i < count; i++) {
            this.particles.push({
              x,
              y,
              angle: Math.random() * Math.PI * 2,
              speed: Math.random() * 6 + 2,
              alpha: 1,
              color: `hsl(${45 + Math.random() * 15},100%,55%)`,
            });
          }
        }
        update() {
          this.particles.forEach((p) => {
            p.x += Math.cos(p.angle) * p.speed;
            p.y += Math.sin(p.angle) * p.speed;
            p.alpha -= 0.015;
          });
        }
        draw() {
          this.particles.forEach((p) => {
            ctx.globalAlpha = p.alpha;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = p.color;
            ctx.fill();
          });
          ctx.globalAlpha = 1;
        }
      }

      let fireworks = [];

      function bigBoom() {
        fireworks.push(new Firework(canvas.width / 2, canvas.height / 3, 400));
      }

      function animate() {
        ctx.fillStyle = 'rgba(0,0,0,0.25)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (Math.random() < 0.05) {
          fireworks.push(new Firework(Math.random() * canvas.width, Math.random() * canvas.height * 0.4));
        }

        fireworks.forEach((fw, i) => {
          fw.update();
          fw.draw();
          if (fw.particles[0].alpha <= 0) {
            fireworks.splice(i, 1);
          }
        });

        requestAnimationFrame(animate);
      }
    </script>
  </body>
</html>

